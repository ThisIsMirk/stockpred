
<!DOCTYPE html>
<html>
<head>
    <title>Portfolio Analysis Report</title>
    <meta charset="UTF-8">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 40px;
            background-color: #f8f9fa;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 3px solid #3498db;
            padding-bottom: 20px;
            margin-bottom: 40px;
        }
        h2 {
            color: #34495e;
            border-left: 5px solid #3498db;
            padding-left: 15px;
            margin-top: 40px;
        }
        h3 {
            color: #34495e;
            margin-top: 30px;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .stat-card {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }
        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #2c3e50;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background-color: white;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #3498db;
            color: white;
            font-weight: bold;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        tr:hover {
            background-color: #e8f4fd;
        }
        .highlight {
            background-color: #e8f4fd;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        .positive { color: #27ae60; font-weight: bold; }
        .negative { color: #e74c3c; font-weight: bold; }
        .summary-box {
            background-color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .timestamp {
            text-align: center;
            color: #7f8c8d;
            font-style: italic;
            margin-top: 40px;
        }
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 20px 0;
        }
        .metric {
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            margin: 5px 0;
        }
        .metric strong {
            color: #2c3e50;
        }
        ol, ul {
            padding-left: 20px;
        }
        li {
            margin: 8px 0;
        }
        .performance-highlight {
            background-color: #d5f4e6;
            border-left: 4px solid #27ae60;
            padding: 15px;
            margin: 15px 0;
        }
        .warning-highlight {
            background-color: #fdeaea;
            border-left: 4px solid #e74c3c;
            padding: 15px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üèõÔ∏è Portfolio Analysis Report</h1>
        <div class="timestamp">Generated on 2025-05-25 11:49:07</div>

        <h2>üìä Overall Statistics</h2>
        <div class="stats-grid">
            <div class="stat-card">
                <div>Total Observations</div>
                <div class="stat-value">16,670</div>
            </div>
            <div class="stat-card">
                <div>Unique Stocks (permno)</div>
                <div class="stat-value">100</div>
            </div>
            <div class="stat-card">
                <div>Time Period</div>
                <div class="stat-value">2010-01 to 2023-12</div>
            </div>
            <div class="stat-card">
                <div>Total Months</div>
                <div class="stat-value">168</div>
            </div>
        </div>

        <h2>üìà Portfolio Composition by Decile</h2>
        <p>Each rank represents a decile portfolio based on predicted returns. Rank 0 = worst predictions (SHORT), Rank 9 = best predictions (LONG).</p>
        <table border="1" class="dataframe table" id="portfolio-table">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Count</th>
      <th>Pred_Mean</th>
      <th>Pred_Std</th>
      <th>Pred_Min</th>
      <th>Pred_Max</th>
      <th>Actual_Mean</th>
      <th>Actual_Std</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Rank 0.0 (SHORT)</th>
      <td>1610</td>
      <td>-0.0095</td>
      <td>0.0120</td>
      <td>-0.1197</td>
      <td>0.0116</td>
      <td>0.0095</td>
      <td>0.0720</td>
    </tr>
    <tr>
      <th>Rank 1.0</th>
      <td>1680</td>
      <td>-0.0025</td>
      <td>0.0108</td>
      <td>-0.1122</td>
      <td>0.0146</td>
      <td>0.0109</td>
      <td>0.0640</td>
    </tr>
    <tr>
      <th>Rank 2.0</th>
      <td>1680</td>
      <td>0.0015</td>
      <td>0.0105</td>
      <td>-0.1075</td>
      <td>0.0183</td>
      <td>0.0087</td>
      <td>0.0682</td>
    </tr>
    <tr>
      <th>Rank 3.0</th>
      <td>1680</td>
      <td>0.0044</td>
      <td>0.0103</td>
      <td>-0.1039</td>
      <td>0.0229</td>
      <td>0.0086</td>
      <td>0.0696</td>
    </tr>
    <tr>
      <th>Rank 4.0</th>
      <td>1669</td>
      <td>0.0071</td>
      <td>0.0104</td>
      <td>-0.1006</td>
      <td>0.0256</td>
      <td>0.0089</td>
      <td>0.0726</td>
    </tr>
    <tr>
      <th>Rank 5.0</th>
      <td>1680</td>
      <td>0.0096</td>
      <td>0.0104</td>
      <td>-0.0985</td>
      <td>0.0296</td>
      <td>0.0098</td>
      <td>0.0673</td>
    </tr>
    <tr>
      <th>Rank 6.0</th>
      <td>1680</td>
      <td>0.0123</td>
      <td>0.0104</td>
      <td>-0.0938</td>
      <td>0.0327</td>
      <td>0.0105</td>
      <td>0.0748</td>
    </tr>
    <tr>
      <th>Rank 7.0</th>
      <td>1680</td>
      <td>0.0155</td>
      <td>0.0104</td>
      <td>-0.0885</td>
      <td>0.0374</td>
      <td>0.0153</td>
      <td>0.0811</td>
    </tr>
    <tr>
      <th>Rank 8.0</th>
      <td>1680</td>
      <td>0.0199</td>
      <td>0.0105</td>
      <td>-0.0786</td>
      <td>0.0424</td>
      <td>0.0123</td>
      <td>0.0847</td>
    </tr>
    <tr>
      <th>Rank 9.0 (LONG)</th>
      <td>1631</td>
      <td>0.0283</td>
      <td>0.0119</td>
      <td>-0.0684</td>
      <td>0.0806</td>
      <td>0.0127</td>
      <td>0.0953</td>
    </tr>
  </tbody>
</table>

        <h2>üìÖ Average Monthly Portfolio Sizes</h2>
        <p>Average number of stocks in each portfolio per month:</p>
        <table border="1" class="dataframe table">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean</th>
      <th>std</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Rank 0.0</th>
      <td>9.6</td>
      <td>0.5</td>
    </tr>
    <tr>
      <th>Rank 1.0</th>
      <td>10.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>Rank 2.0</th>
      <td>10.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>Rank 3.0</th>
      <td>10.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>Rank 4.0</th>
      <td>9.9</td>
      <td>0.2</td>
    </tr>
    <tr>
      <th>Rank 5.0</th>
      <td>10.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>Rank 6.0</th>
      <td>10.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>Rank 7.0</th>
      <td>10.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>Rank 8.0</th>
      <td>10.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>Rank 9.0</th>
      <td>9.7</td>
      <td>0.5</td>
    </tr>
  </tbody>
</table>

        <h2>üéØ Extreme Portfolios Analysis</h2>
        
        <div class="two-column">
            <div class="stat-card">
                <h3>SHORT Portfolio (Rank 0)</h3>
                <div class="metric"><strong>Avg stocks/month:</strong> 10</div>
                <div class="metric"><strong>Avg predicted return:</strong> <span class="negative">-0.0095</span></div>
                <div class="metric"><strong>Avg actual return:</strong> <span class="negative">0.0095</span></div>
                <div class="metric"><strong>Prediction range:</strong> -0.1197 to 0.0116</div>
            </div>
            
            <div class="stat-card">
                <h3>LONG Portfolio (Rank 9)</h3>
                <div class="metric"><strong>Avg stocks/month:</strong> 10</div>
                <div class="metric"><strong>Avg predicted return:</strong> <span class="positive">0.0283</span></div>
                <div class="metric"><strong>Avg actual return:</strong> <span class="positive">0.0127</span></div>
                <div class="metric"><strong>Prediction range:</strong> -0.0684 to 0.0806</div>
            </div>
        </div>
        
        <div class="performance-highlight">
            <h3>üìä Long-Short Spread Analysis:</h3>
            <div class="metric"><strong>Predicted spread:</strong> 0.0378</div>
            <div class="metric"><strong>Actual spread:</strong> <span class="positive">0.0032</span></div>
            <div class="metric"><strong>Strategy Performance:</strong> ‚úÖ Profitable 
                (Model predictions align with reality)</div>
        </div>

        <h2>üìã Latest Month Portfolio Holdings</h2>
        <p><strong>Latest month:</strong> 2023-12 | <strong>Total stocks:</strong> 97</p>
        
        <div class="two-column">
            <div>
                <h3>üü¢ Top 10 Long Positions</h3>
                <p><em>Highest predicted returns</em></p>
                <table border="1" class="dataframe table">
  <thead>
    <tr style="text-align: right;">
      <th>Stock ID (permno)</th>
      <th>Predicted Return</th>
      <th>Actual Return</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>75186</td>
      <td>0.0597</td>
      <td>0.1177</td>
    </tr>
    <tr>
      <td>27887</td>
      <td>0.0467</td>
      <td>0.0672</td>
    </tr>
    <tr>
      <td>66157</td>
      <td>0.0443</td>
      <td>0.1439</td>
    </tr>
    <tr>
      <td>17005</td>
      <td>0.0417</td>
      <td>0.1577</td>
    </tr>
    <tr>
      <td>49154</td>
      <td>0.0392</td>
      <td>0.0600</td>
    </tr>
    <tr>
      <td>90505</td>
      <td>0.0392</td>
      <td>0.0627</td>
    </tr>
    <tr>
      <td>76226</td>
      <td>0.0391</td>
      <td>0.0284</td>
    </tr>
    <tr>
      <td>71563</td>
      <td>0.0389</td>
      <td>0.1444</td>
    </tr>
    <tr>
      <td>22293</td>
      <td>0.0371</td>
      <td>0.0645</td>
    </tr>
    <tr>
      <td>25785</td>
      <td>0.0349</td>
      <td>0.1838</td>
    </tr>
  </tbody>
</table>
            </div>
            <div>
                <h3>üî¥ Top 10 Short Positions</h3>
                <p><em>Lowest predicted returns</em></p>
                <table border="1" class="dataframe table">
  <thead>
    <tr style="text-align: right;">
      <th>Stock ID (permno)</th>
      <th>Predicted Return</th>
      <th>Actual Return</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>17778</td>
      <td>-0.0045</td>
      <td>-0.0103</td>
    </tr>
    <tr>
      <td>10104</td>
      <td>-0.0037</td>
      <td>-0.0971</td>
    </tr>
    <tr>
      <td>92655</td>
      <td>-0.0033</td>
      <td>-0.0488</td>
    </tr>
    <tr>
      <td>59328</td>
      <td>-0.0031</td>
      <td>0.1199</td>
    </tr>
    <tr>
      <td>50876</td>
      <td>0.0025</td>
      <td>-0.0180</td>
    </tr>
    <tr>
      <td>14593</td>
      <td>0.0028</td>
      <td>0.0093</td>
    </tr>
    <tr>
      <td>10107</td>
      <td>0.0042</td>
      <td>-0.0119</td>
    </tr>
    <tr>
      <td>11850</td>
      <td>0.0054</td>
      <td>-0.0312</td>
    </tr>
    <tr>
      <td>20482</td>
      <td>0.0064</td>
      <td>0.0511</td>
    </tr>
    <tr>
      <td>22111</td>
      <td>0.0077</td>
      <td>0.0091</td>
    </tr>
  </tbody>
</table>
            </div>
        </div>

        <h2>üìà Portfolio Evolution Over Time</h2>
        <p>Monthly aggregated statistics across all portfolios:</p>
        
        <h3>Recent Months (Last 10):</h3>
        <table border="1" class="dataframe table">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Total_Stocks</th>
      <th>Pred_Mean</th>
      <th>Pred_Std</th>
      <th>Actual_Mean</th>
      <th>Actual_Std</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2023-03-01</th>
      <td>97</td>
      <td>0.0098</td>
      <td>0.0130</td>
      <td>-0.0092</td>
      <td>0.0972</td>
    </tr>
    <tr>
      <th>2023-04-01</th>
      <td>97</td>
      <td>0.0139</td>
      <td>0.0113</td>
      <td>0.0163</td>
      <td>0.0528</td>
    </tr>
    <tr>
      <th>2023-05-01</th>
      <td>97</td>
      <td>0.0132</td>
      <td>0.0114</td>
      <td>-0.0542</td>
      <td>0.0712</td>
    </tr>
    <tr>
      <th>2023-06-01</th>
      <td>97</td>
      <td>0.0149</td>
      <td>0.0123</td>
      <td>0.0582</td>
      <td>0.0511</td>
    </tr>
    <tr>
      <th>2023-07-01</th>
      <td>97</td>
      <td>0.0120</td>
      <td>0.0143</td>
      <td>0.0358</td>
      <td>0.0639</td>
    </tr>
    <tr>
      <th>2023-08-01</th>
      <td>97</td>
      <td>0.0095</td>
      <td>0.0133</td>
      <td>-0.0309</td>
      <td>0.0552</td>
    </tr>
    <tr>
      <th>2023-09-01</th>
      <td>97</td>
      <td>0.0165</td>
      <td>0.0124</td>
      <td>-0.0439</td>
      <td>0.0496</td>
    </tr>
    <tr>
      <th>2023-10-01</th>
      <td>97</td>
      <td>0.0133</td>
      <td>0.0117</td>
      <td>-0.0277</td>
      <td>0.0628</td>
    </tr>
    <tr>
      <th>2023-11-01</th>
      <td>97</td>
      <td>0.0223</td>
      <td>0.0123</td>
      <td>0.0752</td>
      <td>0.0726</td>
    </tr>
    <tr>
      <th>2023-12-01</th>
      <td>97</td>
      <td>0.0201</td>
      <td>0.0115</td>
      <td>0.0470</td>
      <td>0.0677</td>
    </tr>
  </tbody>
</table>
        
        <h3>Early Months (First 10):</h3>
        <table border="1" class="dataframe table">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Total_Stocks</th>
      <th>Pred_Mean</th>
      <th>Pred_Std</th>
      <th>Actual_Mean</th>
      <th>Actual_Std</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2010-01-01</th>
      <td>100</td>
      <td>0.0074</td>
      <td>0.0149</td>
      <td>-0.0255</td>
      <td>0.0774</td>
    </tr>
    <tr>
      <th>2010-02-01</th>
      <td>100</td>
      <td>0.0146</td>
      <td>0.0129</td>
      <td>0.0298</td>
      <td>0.0432</td>
    </tr>
    <tr>
      <th>2010-03-01</th>
      <td>100</td>
      <td>0.0119</td>
      <td>0.0119</td>
      <td>0.0690</td>
      <td>0.0631</td>
    </tr>
    <tr>
      <th>2010-04-01</th>
      <td>100</td>
      <td>0.0074</td>
      <td>0.0118</td>
      <td>0.0112</td>
      <td>0.0671</td>
    </tr>
    <tr>
      <th>2010-05-01</th>
      <td>100</td>
      <td>0.0019</td>
      <td>0.0139</td>
      <td>-0.0787</td>
      <td>0.0368</td>
    </tr>
    <tr>
      <th>2010-06-01</th>
      <td>100</td>
      <td>0.0185</td>
      <td>0.0131</td>
      <td>-0.0544</td>
      <td>0.0557</td>
    </tr>
    <tr>
      <th>2010-07-01</th>
      <td>100</td>
      <td>0.0156</td>
      <td>0.0117</td>
      <td>0.0756</td>
      <td>0.0605</td>
    </tr>
    <tr>
      <th>2010-08-01</th>
      <td>100</td>
      <td>0.0168</td>
      <td>0.0127</td>
      <td>-0.0456</td>
      <td>0.0635</td>
    </tr>
    <tr>
      <th>2010-09-01</th>
      <td>100</td>
      <td>0.0268</td>
      <td>0.0134</td>
      <td>0.0927</td>
      <td>0.0549</td>
    </tr>
    <tr>
      <th>2010-10-01</th>
      <td>100</td>
      <td>0.0159</td>
      <td>0.0102</td>
      <td>0.0362</td>
      <td>0.0669</td>
    </tr>
  </tbody>
</table>

        <h2>üéØ Trading Strategy Summary</h2>
        <div class="summary-box">
            <div class="stats-grid">
                <div class="metric"><strong>Portfolio Type:</strong> Long-Short Equity Strategy</div>
                <div class="metric"><strong>Universe:</strong> US Stocks with sufficient data</div>
                <div class="metric"><strong>Rebalancing:</strong> Monthly</div>
                <div class="metric"><strong>Signal:</strong> Machine Learning Predicted Returns (Ridge Regression)</div>
            </div>
            
            <h3>üîß Strategy Mechanics:</h3>
            <ol>
                <li>Each month, rank ALL stocks by predicted returns</li>
                <li>Divide into 10 equal-sized portfolios (deciles)</li>
                <li>Portfolio 1 (rank 0): WORST predicted returns ‚Üí <strong>SHORT</strong></li>
                <li>Portfolio 10 (rank 9): BEST predicted returns ‚Üí <strong>LONG</strong></li>
                <li>Portfolio 11: LONG - SHORT (the strategy return)</li>
            </ol>
            
            <h3>‚öñÔ∏è Portfolio Weights:</h3>
            <ul>
                <li>Equal-weighted within each portfolio</li>
                <li>No leverage (dollar-neutral long-short)</li>
                <li>Monthly rebalancing based on new predictions</li>
            </ul>
            
            <h3>üí° Interpretation:</h3>
            <div class="highlight">
                <p><strong>Your model is trying to identify:</strong></p>
                <ul>
                    <li>üü¢ Stocks that will <strong>OUTPERFORM</strong> ‚Üí BUY (Long portfolio)</li>
                    <li>üî¥ Stocks that will <strong>UNDERPERFORM</strong> ‚Üí SELL SHORT (Short portfolio)</li>
                    <li>üí∞ Profit comes from the <strong>SPREAD</strong> between long and short returns</li>
                </ul>
            </div>
        </div>
        
        <div class="timestamp">
            <p>üìÑ Report generated from: <code>stock_predictions_ridge.csv</code></p>
            <p>ü§ñ Model: RIDGE Regression</p>
        </div>
    </div>
</body>
</html>
